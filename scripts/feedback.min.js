"use strict";document.addEventListener("DOMContentLoaded",(function(){const form=document.getElementById("form");async function formSend(e){e.preventDefault();let error=formValidate(form),formData=new FormData(form);if(0===error){form.classList.add("_sending");let response=await fetch("sendmail.php",{method:"POST",body:formData});if(response.ok){let result=await response.json();alert(result.message),form.reset(),form.classList.remove("_sending")}else alert("Ошибка"),form.classList.remove("_sending")}else alert("Заполните корректно обязательные поля")}function formValidate(form){let error=0,formReq=document.querySelectorAll("._req");for(let index=0;index<formReq.length;index++){const input=formReq[index];formRemoveError(input),input.classList.contains("_email")?emailTest(input)&&(formAddError(input),error++):"checkbox"===input.getAttribute("type")&&!1===input.checked?(formAddError(input),error++):""===input.value&&(formAddError(input),error++)}return error}function formAddError(input){input.parentElement.classList.add("_error"),input.classList.add("_error")}function formRemoveError(input){input.parentElement.classList.remove("_error"),input.classList.remove("_error")}function emailTest(input){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(input.value)}form.addEventListener("submit",formSend)}));